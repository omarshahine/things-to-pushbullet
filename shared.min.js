var browser={element:void 0,cachedImages:[],isMac:!1,isWindows:!1,isIos:!1,isIphone:!1,isIpad:!1,isWebkit:!1,isSafari:!1,isChrome:!1,isFirefox:!1,isIE:!1,hasVideo:!1,hasH264:!1,hasInlineVideo:!1,hasPlaceholder:!1,isRetina:!1,isTouch:!1,isClick:!1,deviceCategory:void 0,devicePixelRatio:1,STATE_JS:"browser-has-js",STATE_MAC:"browser-is-mac",STATE_WINDOWS:"browser-is-windows",STATE_IOS:"browser-is-ios",STATE_IPHONE:"browser-is-iphone",STATE_IPAD:"browser-is-ipad",STATE_WEBKIT:"browser-is-webkit",STATE_SAFARI:"browser-is-safari",STATE_CHROME:"browser-is-chrome",STATE_FIREFOX:"browser-is-firefox",STATE_IE:"browser-is-ie",STATE_VIDEO:"browser-has-video",STATE_H264:"browser-has-h264",STATE_INLINEVIDEO:"browser-has-inlinevideo",STATE_PLACEHOLDER:"browser-has-placeholder",STATE_RETINA:"browser-is-retina",STATE_MOBILE:"browser-is-mobile",STATE_TABLET:"browser-is-tablet",STATE_DESKTOP:"browser-is-desktop",STATE_TOUCH:"browser-is-touch",STATE_CLICK:"browser-is-click",DEVICE_CATEGORY_MOBILE:"mobile",DEVICE_CATEGORY_TABLET:"tablet",DEVICE_CATEGORY_DESKTOP:"desktop",init:function(e){this.element=e;var t="";t+=this.STATE_JS+" ",RegExp("Macintosh").test(navigator.userAgent)?(this.isMac=!0,t+=this.STATE_MAC+" "):RegExp("Windows").test(navigator.userAgent)?(this.isWindows=!0,t+=this.STATE_WINDOWS+" "):RegExp(" AppleWebKit/").test(navigator.userAgent)&&RegExp(" Mobile/").test(navigator.userAgent)&&(this.isIos=!0,t+=this.STATE_IOS+" ",RegExp("iPhone").test(navigator.userAgent)?(this.isIphone=!0,t+=this.STATE_IPHONE+" "):RegExp("iPad").test(navigator.userAgent)&&(this.isIpad=!0,t+=this.STATE_IPAD+" ")),RegExp(" Safari/").test(navigator.userAgent)?(this.isWebkit=!0,t+=this.STATE_WEBKIT+" ",RegExp(" Chrome/").test(navigator.userAgent)?(this.isChrome=!0,t+=this.STATE_CHROME+" "):(this.isSafari=!0,t+=this.STATE_SAFARI+" ")):RegExp("Firefox").test(navigator.userAgent)?(this.isFirefox=!0,t+=this.STATE_FIREFOX+" "):RegExp("MSIE").test(navigator.userAgent)&&(this.isIE=!0,t+=this.STATE_IE+" "),document.createElement("video").canPlayType&&(this.hasVideo=!0,t+=this.STATE_VIDEO+" ",document.createElement("video").canPlayType("video/mp4")&&(this.hasH264=!0,t+=this.STATE_H264+" "),"playsInline"in document.createElement("video")&&(this.hasInlineVideo=!0,t+=this.STATE_INLINEVIDEO+" ")),"placeholder"in document.createElement("input")&&(this.hasPlaceholder=!0,t+=this.STATE_PLACEHOLDER+" "),void 0!==window.devicePixelRatio&&(this.devicePixelRatio=window.devicePixelRatio,1<this.devicePixelRatio&&(this.isRetina=!0,t+=this.STATE_RETINA+" ")),this.isMac?(this.deviceCategory=this.DEVICE_CATEGORY_DESKTOP,t+=this.STATE_DESKTOP+" "):this.isIpad?(this.deviceCategory=this.DEVICE_CATEGORY_TABLET,t+=this.STATE_TABLET+" "):(this.deviceCategory=this.DEVICE_CATEGORY_MOBILE,t+=this.STATE_MOBILE+" "),"ontouchstart"in window?(this.isTouch=!0,t+=this.STATE_TOUCH+" "):(this.isClick=!0,t+=this.STATE_CLICK+" "),this.element.addClass(t)},preloadImage:function(e,t){var i=new Image;i.src=e,t&&(i.onload=t),this.cachedImages.push(i)},preloadImages:function(e){for(var t=0;t<e.length;t++)this.preloadImage(e[t])}},emailer={sendEmail:function(e,t){void 0===e&&(e="support"),t=void 0!==t?encodeURIComponent(t):"",window.location="mailto:"+e+"@"+window.location.hostname+"?subject="+t}},retinaimage={elements:void 0,DEFAULT_MIN_DEVICE_PIXEL_RATIO:1.5,DEFAULT_MIN_DEVICE_WIDTH:0,ATTRIBUTE_RETINA_SRC:"data-retina-src",ATTRIBUTE_MIN_DEVICE_WIDTH:"data-min-device-width",ATTRIBUTE_MIN_DEVICE_PIXEL_RATIO:"data-min-device-pixel-ratio",ATTRIBUTE_MIN_DEVICE_CATEGORY:"data-min-device-category",init:function(e){this.elements=e,window.matchMedia&&window.matchMedia("(-webkit-device-pixel-ratio:1)").addListener(this.screenChangeHandler),this.update()},update:function(){var e=1;void 0!==window.devicePixelRatio&&(e=window.devicePixelRatio);var t=browser.deviceCategory;if(1<e)for(var i=0;i<this.elements.length;++i){var a=$(this.elements[i]),s=a.attr(this.ATTRIBUTE_RETINA_SRC);if(""!==s){var r=a.attr(this.ATTRIBUTE_MIN_DEVICE_PIXEL_RATIO)?a.attr(this.ATTRIBUTE_MIN_DEVICE_PIXEL_RATIO):this.DEFAULT_MIN_DEVICE_PIXEL_RATIO,n=a.attr(this.ATTRIBUTE_MIN_DEVICE_WIDTH)?a.attr(this.ATTRIBUTE_MIN_DEVICE_WIDTH):this.DEFAULT_MIN_DEVICE_WIDTH,o=a.attr(this.ATTRIBUTE_MIN_DEVICE_CATEGORY)?a.attr(this.ATTRIBUTE_MIN_DEVICE_CATEGORY):browser.DEVICE_CATEGORY_MOBILE;this.matchMinDevicePixelRatio(e,r)&&this.matchMinDeviceWidth(n)&&this.matchMinDeviceCategory(t,o)&&a.attr("src",s)}}},matchMinDevicePixelRatio:function(e,t){return t<=e},matchMinDeviceWidth:function(e){var t=!1;if(0===e)t=!0;else if(void 0!==window.matchMedia){var i="(min-device-width: "+e+"px)";window.matchMedia(i).matches&&(t=!0)}return t},matchMinDeviceCategory:function(e,t){var i=!1;return t===browser.DEVICE_CATEGORY_MOBILE?i=!0:t===browser.DEVICE_CATEGORY_TABLET?i=e===browser.DEVICE_CATEGORY_TABLET||e===browser.DEVICE_CATEGORY_DESKTOP:t===browser.DEVICE_CATEGORY_DESKTOP&&(i=e===browser.DEVICE_CATEGORY_DESKTOP),i},screenChangeHandler:function(){var e;retinaimage.update()}},remotecontrol={CLASS_INIT:"is-initialized",CLASS_PLAYING:"is-playing",CLASS_READY:"is-ready",DATA_CINEMA_ID:"cinema-id",DATA_SCROLL:"scroll",DATA_VIDEO_SRC:"video-src",init:function(e){for(var t=0;t<e.length;++t){var i=e.eq(t);if(i.hasClass(this.CLASS_INIT))return;i.addClass(this.CLASS_INIT);var a=$("#"+i.data(this.DATA_CINEMA_ID));cinema.registerRemoteControl(a,i),i.on("click",$.proxy(function(e){var t=$(e.currentTarget),i=$("#"+t.data(this.DATA_CINEMA_ID));if(t.data(this.DATA_SCROLL)){var a=i,s=$(document).scrollTop(),r=s+$(window).height(),n=a.offset().top,o=n+a.height();if(s<=n&&o<=r);else if(n<s&&r<o);else if(n<s&&s<o||n<r&&r<o){if("down"===t.data(this.DATA_SCROLL)){var l=1600,d=1e3,h,T=(h=o-$(window).height()+50)-s,u=Math.abs(Math.round(T/l*1e3));u=Math.min(u,d),$("html, body").animate({scrollTop:h},u,"swing")}}else{var l=1600,d=1e3,h,T=(h=n-50)-s,u=Math.abs(Math.round(T/l*1e3));u=Math.min(u,d),$("html, body").animate({scrollTop:h},u,"swing")}}cinema.play(i,!0,t.data(this.DATA_VIDEO_SRC))},this))}}},cinema={CLASS_INIT:"is-initialized",CLASS_PLAYING:"is-playing",CLASS_PLAYED:"has-played",CLASS_READY:"is-ready",CLASS_HAS_BUTTON:"has-button",CLASS_HAS_POSTER_WITH_BUTTON:"has-poster-with-button",CLASS_HAS_CONTROLS_WHILE_PLAYING:"has-controls-while-playing",DATA_REMOTE_CONTROL_ELEMENT:"remote-control-element",init:function(e){for(var t=0;t<e.length;++t){var i=e.eq(t),a=i.find("video").eq(0);if(i.hasClass(this.CLASS_INIT))return;i.addClass(this.CLASS_INIT),i.data(this.DATA_REMOTE_CONTROL_ELEMENT,[]),(i.hasClass(this.CLASS_HAS_BUTTON)||i.hasClass(this.CLASS_HAS_POSTER_WITH_BUTTON))&&a[0].hasAttribute("controls")&&(a[0].removeAttribute("controls"),i.addClass(this.CLASS_HAS_CONTROLS_WHILE_PLAYING)),i.on("click",$.proxy(function(e){var t=$(e.currentTarget);!1===t.hasClass(this.CLASS_PLAYED)&&this.play(t)},this)),a.on("canplaythrough",$.proxy(function(e){var t,i=$(e.currentTarget).closest(".cinema");i.addClass(this.CLASS_READY);for(var a=i.data(this.DATA_REMOTE_CONTROL_ELEMENT),s=0;s<a.length;++s)a[s].addClass(this.CLASS_READY)},this)),a.on("play",$.proxy(function(e){var t=$(e.currentTarget),i=t.closest(".cinema");i.addClass(this.CLASS_PLAYING),i.addClass(this.CLASS_PLAYED);for(var a=i.data(this.DATA_REMOTE_CONTROL_ELEMENT),s=0;s<a.length;++s){var r=this.getAbsoluteUrl(t[0].src),n=this.getAbsoluteUrl(a[s].data(remotecontrol.DATA_VIDEO_SRC));n&&r!==n?a[s].removeClass(this.CLASS_PLAYING):(a[s].addClass(this.CLASS_PLAYING),a[s].addClass(this.CLASS_PLAYED))}i.hasClass(this.CLASS_HAS_CONTROLS_WHILE_PLAYING)&&t.attr("controls","true")},this)),a.on("pause",$.proxy(function(e){var t,i=$(e.currentTarget).closest(".cinema");i.removeClass(this.CLASS_PLAYING);for(var a=i.data(this.DATA_REMOTE_CONTROL_ELEMENT),s=0;s<a.length;++s)a[s].removeClass(this.CLASS_PLAYING)},this))}},play:function(e,t,i){var a=e.find("video").eq(0);i?(a[0].src=i,a[0].load(),a[0].play()):(a[0].play(),!0===t&&(a[0].currentTime=0))},registerRemoteControl:function(e,t){var i=e.data(this.DATA_REMOTE_CONTROL_ELEMENT);i.push(t),e.data(this.DATA_REMOTE_CONTROL_ELEMENT,i)},getAbsoluteUrl:function(e){if(e){var t="";return t=0===e.indexOf("http:")||0===e.indexOf("https:")?e:0===e.indexOf("//")?window.location.protocol+e:0===e.indexOf("/")?window.location.protocol+"//"+window.location.hostname+e:window.location.href.substr(0,window.location.href.lastIndexOf("/"))+"/"+e}}},CulturedTweets={path:null,file:null,element:null,numberOfPages:0,tweetsPerPage:5,selectedPage:0,tweets:[],keywords:null,append:!1};!function(){function E(e){var t=new Date,i=(t.getTime()-e.getTime())/1e3,a=Math.floor(i/86400);if(isNaN(a))return console.log("[WARNING] Error formatting date for tweets, returing ''."),"";if(i<0)return e.toLocaleDateString();if(i<60)return"just now";if(i<120)return"1 minute ago";if(i<3600)return Math.floor(i/60)+" minutes ago";if(i<7200)return"1 hour ago";if(i<86400)return Math.floor(i/3600)+" hours ago";if(1==a)return"Yesterday";if(a<7)return a+" days ago";if(a<14)return"1 week ago";var s="";return s+=r[e.getMonth()],s+=" "+e.getDate(),e.getFullYear()!==t.getFullYear()&&(s+=", "+e.getFullYear()),s}function t(e){return e.replace(/[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&~\?\/.=]+/g,function(e){return e.link(e)})}function i(e){return e.replace(/[@]+\w+/g,function(e){var t=e.replace("@","");return e.link("http://twitter.com/"+t)})}function a(e){return e.replace(/[#]+[A-Za-z]\w*/g,function(e){var t=e.replace("#","%23");return e.link("http://twitter.com/search?q="+t)})}function A(e){return e=a(e=i(e=t(e)))}function u(e,s){return s&&0!==s.length?jQuery.grep(e,function(e){var t,i=e["tweet-text"].toLowerCase().toLowerCase(),a;return 0<jQuery.grep(s,function(e){return 0<=i.search(e)}).length}):e}function c(e){var t=e["tweet-id"],i=e["tweet-text"],a=e["tweet-date"].replace(" +"," UTC+"),s=E(new Date(a)),r=e["author-twitter-name"],n=e["author-real-name"],o=e["avatar-name"],l=o?CulturedTweets.path+o:null,d=l||e["author-image-url"],h,T="https://twitter.com/"+r+"/status/"+t,u="";return u+="<li class='tweetgrid-tweet'>",u+="    <div class='tweetgrid-bubble'>",u+="        <div class='tweetgrid-content'>"+A(i)+"</div>",u+="    </div>",u+="    <div class='tweetgrid-meta'>",u+="        <div class='tweetgrid-avatar'><a href='"+T+"'><img src='"+d+"'></a></div>",u+="        <div class='tweetgrid-author'>"+n+"</div>",u+="        <div class='tweetgrid-date'>"+s+"</div>",u+="    </div>",u+="</li>"}function _(e,t,i,a){return a?"<a href='#' class='"+t+"' onClick='javascript: "+i+";return false;'>"+e+"</a>":"<a class='is-disabled "+t+"' onClick='javascript: return false;'>"+e+"</a>"}function l(e){for(var t=CulturedTweets.hasNextPage(),i=CulturedTweets.hasPreviousPage(),a=CulturedTweets.append,s=t?" has-next-page":"",r=i?" has-previous-page":"",n=a?" style-append":" style-replace",o=[],l=0;l<e.length;l+=1){var d,h=c(e[l]);o.push(h)}var T="";return T+="<ul class='tweetgrid-list "+s+r+"'>",T+=o.join("\n"),T+="</ul>",T+="<div class='tweetgrid-actions "+n+"'>",a?(T+="<div class='tweetgrid-buttonwrapper for-more'>",T+=_("Show More Tweets","tweetgrid-button","CulturedTweets.nextPage();",t)):(T+="<div class='tweetgrid-buttonwrapper for-previous'>",T+=_("Previous Tweets","tweetgrid-button","CulturedTweets.previousPage();",i),T+="</div>",T+="<div class='tweetgrid-buttonwrapper for-next'>",T+=_("Next Tweets","tweetgrid-button","CulturedTweets.nextPage();",t)),T+="</div>",T+="</div>"}function o(e,t){jQuery.getJSON(e,t)}function S(){var e=CulturedTweets.path,t=CulturedTweets.file,i=e+t,a=CulturedTweets.selectedPage,s=CulturedTweets.numberOfPages,d=CulturedTweets.keywords,h=s-1<=a,r=CulturedTweets.tweets,n,T=5*CulturedTweets.tweetsPerPage;t?o(e+t,function(e){var t=e.tweets,i=e.next,a=CulturedTweets.tweetsPerPage,s=CulturedTweets.tweets,r=u(t,d),n=s.concat(r),o=n.length,l=i&&r.length<T;CulturedTweets.file=i||null,CulturedTweets.tweets=n,CulturedTweets.numberOfPages=Math.ceil(o/a),h&&CulturedTweets.update(),l&&S()}):h&&CulturedTweets.update()}var r=["January","February","March","April","May","June","July","August","September","October","November","December"];CulturedTweets.setup=function(e,t,i,a,s,r){CulturedTweets.path=e,CulturedTweets.file=t,CulturedTweets.element=i,CulturedTweets.tweetsPerPage=a||5,CulturedTweets.keywords=s||[],CulturedTweets.append=r||!1,S()},CulturedTweets.update=function(){var e=CulturedTweets.element,t=CulturedTweets.tweets,i=CulturedTweets.tweetsPerPage,a,s=CulturedTweets.selectedPage*i,r=s+i;CulturedTweets.append?(s=0,jQuery(e).removeClass("style-replace").addClass("style-append")):jQuery(e).addClass("style-replace").removeClass("style-append");var n,o=l(t.slice(s,r));jQuery(e).html(o)},CulturedTweets.nextPage=function(){var e=CulturedTweets.numberOfPages,t=CulturedTweets.selectedPage+1;e<=t&&(t=e),CulturedTweets.selectedPage=t,CulturedTweets.update(),S()},CulturedTweets.previousPage=function(){var e=CulturedTweets.numberOfPages,t=CulturedTweets.selectedPage-1;t<0&&(t=0),CulturedTweets.selectedPage=t,CulturedTweets.update()},CulturedTweets.hasNextPage=function(){return CulturedTweets.selectedPage<CulturedTweets.numberOfPages-1},CulturedTweets.hasPreviousPage=function(){return 0<CulturedTweets.selectedPage}}();var tweetgrid={element:void 0,BREAKPOINT:740,STATE_INIT:"is-initialized",CLASS_APPEND:"style-append",CLASS_REPLACE:"style-replace",init:function(e){$(window).on("resize",$.proxy(this.handleResize,this)),this.element=e,this.update()},update:function(){var e=this.element,t=e.data("number-of-tweets")||8,i="/tweets/",a="favorite-tweets.json",s=e.data("keywords")||"",r=e.data("append")||!1;$(window).width()<this.BREAKPOINT&&(r=!0);var n=!0;e.hasClass(this.STATE_INIT)&&CulturedTweets.append===r&&(n=!1),n&&(e.addClass(this.STATE_INIT),CulturedTweets.setup(i,a,e,t,s.split(" "),r),CulturedTweets.selectedPage=0,CulturedTweets.update())},handleResize:function(e){this.update()}},scroller={CLASS:"scroller",SPEED:1600,MAX_DURATION:1e3,init:function(e){for(var t=0;t<e.length;++t)$(e[t]).on("click",{that:this},function(e){var t=e.data.that,i=$(this),a=$(i.attr("href"));return t.scrollTo(a),!1})},scrollTo:function(e){var t=Math.min(e.offset().top,$(document).height()-$(window).height()),i=t-$(window).scrollTop(),a=Math.abs(Math.round(i/this.SPEED*1e3));a=Math.min(a,this.MAX_DURATION),$("html, body").animate({scrollTop:t},a,"swing")}},tooltip={elements:void 0,CLASS_BUBBLE:"tooltip-bubble",CLASS_CONTENT:"tooltip-content",CLASS_HEADER:"tooltip-header",CLASS_FOOTER:"tooltip-footer",STATE_INIT:"is-initialized",STATE_VISIBLE:"is-visible",init:function(e){this.elements=e;for(var t=0;t<this.elements.length;++t){var i=$(this.elements[t]),a=this.createBubbleElement(i);i.data("bubble-element",a),$(".page").eq(0).append(a)}browser.isTouch?($("."+this.CLASS_BUBBLE).on("touchstart",$.proxy(this.handleBubbleTouchStart,this)),this.elements.on("touchstart",$.proxy(this.handleTouchStart,this)),this.elements.on("click",$.proxy(this.handleTouchClick,this))):(this.elements.on("mouseenter",$.proxy(this.handleMouseEnter,this)),this.elements.on("mouseleave",$.proxy(this.handleMouseLeave,this))),this.elements.addClass(this.STATE_INIT)},createBubbleElement:function(e){var t=e.attr("title"),i=e.data("content"),a=e.data("header"),s=e.data("footer");t&&(e.data("content",t),e.removeAttr("title"),i=t);var r="";e.hasClass("style-large")&&(r+="style-large ");var n=$('<div class="'+this.CLASS_BUBBLE+" "+r+'"></div>');if(i){var o=$('<div class="'+this.CLASS_CONTENT+'">'+i+"</div>");n.append(o)}if(a){var l=$('<div class="'+this.CLASS_HEADER+'">'+a+"</div>");n.prepend(l)}if(s){var d=$('<div class="'+this.CLASS_FOOTER+'">'+s+"</div>");n.append(d)}return n},showBubble:function(e){var t=e.data("bubble-element"),i=5,a=0,s=0,r=0,n=t.outerWidth(),o=t.outerHeight(),l=e.offset().left,d=e.offset().top,h=e.outerWidth(),T=e.outerHeight();s=l+h/2-n/2,r=d-0-o;var u=$(document).width();s=Math.min(s,u-5-n),s=Math.max(s,5),s=Math.round(s),r=Math.round(r),t.addClass(this.STATE_VISIBLE),t.css("left",s),t.css("top",r)},hideAllBubbles:function(){$("."+this.CLASS_BUBBLE).removeClass(this.STATE_VISIBLE)},handleTouchStart:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.currentTarget),i,a;t.data("bubble-element").hasClass(this.STATE_VISIBLE)&&(t.attr("href")&&(window.location=t.attr("href")));this.hideAllBubbles(),this.showBubble(t),$(document).one("touchstart",$.proxy(this.handleTouchDismiss,this))},handleTouchDismiss:function(e){e.stopPropagation(),this.hideAllBubbles()},handleTouchClick:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.currentTarget);!1===t.hasClass(this.STATE_VISIBLE)&&(this.hideAllBubbles(),this.showBubble(t),$(document).one("touchstart",$.proxy(this.handleTouchDismiss,this)))},handleBubbleTouchStart:function(e){e.preventDefault(),e.stopPropagation(),this.hideAllBubbles()},handleMouseEnter:function(e){e.preventDefault(),e.stopPropagation(),this.hideAllBubbles(),this.showBubble($(e.currentTarget))},handleMouseLeave:function(e){this.hideAllBubbles(),e.preventDefault()}},tabs={CLASS:"tabs",CLASS_LINK:"tabs-link",CLASS_TITLE:"tabs-title",CLASS_PANE:"tabs-pane",STATE_INIT:"is-initialized",STATE_SELECTED:"is-selected",init:function(e){for(var t=0;t<e.length;++t){var i=$(e[t]);i.addClass(this.STATE_INIT);var a=i.find("."+this.CLASS_PANE),s=i.find("."+this.CLASS_TITLE);if(s.length===a.length){for(var r=0,n=0;n<a.length;++n){var o=$(a[n]),l=$(s[n]);l.hasClass(this.STATE_SELECTED)&&(r=n),l.on("click.tabs",{element:i,title:l,pane:o},$.proxy(this.handleTabClick,this))}this.selectTab(i,$(s[r]),$(a[r]))}}return!0},selectTab:function(e,t,i){return e.find("."+this.CLASS_TITLE).removeClass(this.STATE_SELECTED),e.find("."+this.CLASS_PANE).removeClass(this.STATE_SELECTED),t.addClass(this.STATE_SELECTED),i.addClass(this.STATE_SELECTED),!0},selectTabForIndex:function(e,t){var i=e.find("."+this.CLASS_TITLE),a=e.find("."+this.CLASS_PANE);return i.length===a.length&&t<a.length&&this.selectTab(e,$(i[t]),$(a[t])),!0},handleTabClick:function(e){e.preventDefault(),this.selectTab(e.data.element,e.data.title,e.data.pane)}},expander={CLASS:"expander",CLASS_TRIGGER:"expander-trigger",STATE_INITIALIZED:"is-initialized",STATE_EXPANDED:"is-expanded",init:function(e){for(var t=0;t<e.length;++t){var i=$(e[t]),a;i.find("."+this.CLASS_TRIGGER).on("click",{element:i},$.proxy(this.handleClick,this)),i.addClass(this.STATE_INITIALIZED)}},expand:function(e){e.toggleClass(this.STATE_EXPANDED)},handleClick:function(e){return e.preventDefault(),e.stopPropagation(),this.expand(e.data.element),!1}},platformbox={elements:void 0,CLASS:"platformbox",CLASS_NAV:"platformbox-nav",CLASS_FRAME:"platformbox-frame",CLASS_TITLE:"platformbox-title",CLASS_PANE:"platformbox-pane",STATE_INIT:"is-initialized",STATE_SELECTED:"is-selected",init:function(e){this.elements=e;for(var t=0;t<e.length;++t){var i=$(e[t]),a=i.find("."+this.CLASS_TITLE),s=i.find("."+this.CLASS_PANE);if(a.length===s.length){i.addClass(this.STATE_INIT);for(var r=$('<div class="'+this.CLASS_NAV+'"></div>'),n=$('<div class="'+this.CLASS_FRAME+'"></div>'),o=0;o<s.length;++o){var l=$(s[o]),d=$(a[o]);r.append(d),n.append(l)}i.append(r),i.append(n),i.addClass(tabs.CLASS),a.addClass(tabs.CLASS_TITLE),s.addClass(tabs.CLASS_PANE),a.on("click.platformbox",{element:i},$.proxy(this.handleTitleClick,this))}}return!0},selectTabInPlatformBoxesBelow:function(e,t){for(var i=!1,a=0;a<this.elements.length;++a){var s=$(this.elements[a]),r;if(s.hasClass(this.STATE_INIT))if(s[0]===e[0])i=!0;else if(i){for(var n=t.parent().find("."+this.CLASS_TITLE),o=0,l=0;l<n.length;l++)n[l]===t[0]&&(o=l);tabs.selectTabForIndex(s,o)}}return!0},handleTitleClick:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.delegateTarget);return this.selectTabInPlatformBoxesBelow(e.data.element,t),!1}},segmentedcontrol={CLASS:"segmentedcontrol",CLASS_SEGMENT:"segmentedcontrol-segment",STATE_ONE_ITEM:"has-one-item",STATE_TWO_ITEMS:"has-two-items",STATE_THREE_ITEMS:"has-three-items",STATE_FOUR_ITEMS:"has-four-items",STATE_FIVE_ITEMS:"has-five-items",STATE_MORE_ITEMS:"has-more-items",STATE_INIT:"is-initialized",init:function(e){for(var t=0;t<e.length;++t){var i=$(e[t]),a;switch(i.addClass(this.STATE_INIT),i.find("."+this.CLASS_SEGMENT).length){case 1:i.addClass(this.STATE_ONE_ITEM);break;case 2:i.addClass(this.STATE_TWO_ITEMS);break;case 3:i.addClass(this.STATE_THREE_ITEMS);break;case 4:i.addClass(this.STATE_FOUR_ITEMS);break;case 5:i.addClass(this.STATE_FIVE_ITEMS);break;default:i.addClass(this.STATE_MORE_ITEMS);break}}return!0}},motion={elements:[],CLASS:"motion",CLASS_SOURCE:"motion-source",FOR_GIF:"for-gif",FOR_H264:"for-h264",STATE_INIT:"is-initialized",STATE_LOADING:"is-loading",STATE_LOADED:"is-loaded",STATE_PLAYING:"is-playing",STATE_IN_VIEWPORT:"is-in-viewport",STATE_SOURCE_SUPPORTED:"is-supported",STATE_SOURCE_PREFERRED:"is-preferred",DATA_COUNT:"count",DATA_TIMEOUT:"timeout",DATA_PROMISE_GIF:"promise-gif",DATA_PROMISE_GIF_FIRST_FRAME:"promise-gif-first-frame",DATA_PROMISE_GIF_LAST_FRAME:"promise-gif-last-frame",init:function(e){0===this.elements.length&&$(document).on("scroll",$.proxy(this.handleScroll,this));for(var t=0;t<e.length;++t){var i=e.eq(t);if(i.hasClass(this.STATE_INIT))return;this.elements.push(i),i.addClass(this.STATE_INIT),i.css("max-width",i.data("width"));var a=this._getPreferredSource(i);a.hasClass(this.FOR_GIF)?this.initGIF(i,a):a.hasClass(this.FOR_H264)&&this.initH264(i,a)}},start:function(e){if("once"===e.data("autoplay")){var t=e.data("count")?e.data("count"):0;e.data("count",++t)}e.addClass(this.STATE_PLAYING);var i=this._getPreferredSource(e);i.hasClass(this.FOR_GIF)?this.startGIF(e,i):i.hasClass(this.FOR_H264)&&this.startH264(e,i)},stop:function(e){e.removeClass(this.STATE_PLAYING);var t=this._getPreferredSource(e);t.hasClass(this.FOR_GIF)?this.stopGIF(e,t):t.hasClass(this.FOR_H264)&&this.stopH264(e,t)},update:function(e){if("again"===e.data("autoplay")||"once"===e.data("autoplay")){var t;if("once"===e.data("autoplay"))if(0<(e.data(this.DATA_COUNT)?e.data(this.DATA_COUNT):0))return;var i=this._getVisibilityInViewport(e);1===i?e.hasClass(this.STATE_IN_VIEWPORT)||(e.addClass(this.STATE_IN_VIEWPORT),this.start(e)):0<i||0===i&&e.hasClass(this.STATE_IN_VIEWPORT)&&(e.removeClass(this.STATE_IN_VIEWPORT),this.stop(e))}},initGIF:function(e,t){var i=$('<img src="'+t.data("src-first")+'" width="'+e.data("width")+'" height="'+e.data("height")+'">');t.append(i),"always"===t.data("preload")&&this.loadGIF(e,t),t.on("ended",$.proxy(this.handleEnded,this))},loadGIF:function(e,t){e.addClass(this.STATE_LOADING),e.data(this.DATA_PROMISE_GIF,this._getImageLoadedPromise(t.data("src"))),void 0!==t.data("src-last")&&e.data(this.DATA_PROMISE_GIF_LAST_FRAME,this._getImageLoadedPromise(t.data("src-last")));var i=this;e.data(this.DATA_PROMISE_GIF).done(function(){e.removeClass(i.STATE_LOADING),e.addClass(i.STATE_LOADED),i.update(e)})},startGIF:function(t,i){this._clearTimeoutForGIF(t,i);var a=this,e=t.data(this.DATA_PROMISE_GIF);if(e)e.done(function(e){if(i.find("img").eq(0).attr("src",e),i.data("duration")){var t=window.setTimeout(function(){i.trigger("ended")},1e3*i.data("duration"));i.data(a.DATA_TIMEOUT,t)}});else{this.loadGIF(t,i);var a=this;t.data(this.DATA_PROMISE_GIF).done(function(e){a.startGIF(t,i)})}},stopGIF:function(e,t){if("rewind"===e.data("playback")||"loop"===e.data("playback")){var i=t.data("src-first");t.find("img").eq(0).attr("src",i)}else{var a=e.data(this.DATA_PROMISE_GIF_LAST_FRAME);a&&a.done(function(e){t.find("img").eq(0).attr("src",e)})}this._clearTimeoutForGIF(e,t)},_clearTimeoutForGIF:function(e,t){void 0!==t.data(this.DATA_TIMEOUT)&&(window.clearTimeout(t.data(this.DATA_TIMEOUT)),t.removeData(this.DATA_TIMEOUT))},initH264:function(e,t){var i=$('<video src="'+t.data("src")+'" width="'+e.data("width")+'" height="'+e.data("height")+'" preload="auto" playsinline></video>');t.append(i),this.loadH264(e,t);var a=this;i.one("canplaythrough",function(){e.addClass(a.STATE_LOADED),a.update(e)}),i.on("ended",$.proxy(this.handleEnded,this))},loadH264:function(e,t){var i;t.find("video")[0].load()},startH264:function(e,t){var i=t.find("video")[0];i.play(),i.currentTime=0},stopH264:function(e,t){var i=t.find("video")[0];i.pause(),"rewind"!==e.data("playback")&&"loop"!==e.data("playback")||(i.currentTime=0)},_getImageLoadedPromise:function(e){var t=new $.Deferred,i=new Image;return i.onload=function(){t.resolve(e)},i.onerror=function(){t.reject(e)},i.src=e,t.promise()},_getPreferredSource:function(e){var t=e.find("."+this.CLASS_SOURCE+"."+this.STATE_SOURCE_PREFERRED).eq(0);if(0===t.length){var i=e.find("."+this.CLASS_SOURCE),a=[];a=(browser.isMac||browser.hasInlineVideo)&&browser.hasH264?[this.FOR_GIF,this.FOR_H264]:[this.FOR_GIF];for(var s=0;s<a.length;++s)i.filter("."+a[s]).addClass(this.STATE_SOURCE_SUPPORTED);(t=i.filter("."+this.STATE_SOURCE_SUPPORTED).eq(0)).addClass(this.STATE_SOURCE_PREFERRED)}return t},_getVisibilityInViewport:function(e){var t=$(document).scrollTop(),i=t+$(window).height(),a=e.offset().top,s=a+e.height();return t<=a&&s<=i?1:a<t&&i<s?1:a<t&&t<s||a<i&&i<s?.5:0},handleScroll:function(e){for(var t=0;t<this.elements.length;++t)this.update(this.elements[t])},handleEnded:function(e){var t=$(e.currentTarget).parents("."+this.CLASS).eq(0);"loop"===t.data("playback")?this.start(t):this.stop(t)}},video={CLASS:"video",CLASS_LINK:"video-link",CLASS_POSTER:"video-poster",STATE_INIT:"is-initialized",STATE_LAUNCHED:"is-launched",STATE_CANPLAYTHROUGH:"can-play-through",FALLBACK_WIDTH:400,FALLBACK_HEIGHT:225,FILENAME_VIDEO:"video.m4v",FILENAME_VIDEO_SMALL:"video.small.m4v",URL_FLASHPLAYER:"/global/libraries/jwplayer/jwplayer-5.5/player.swf",URL_FLASHPLAYER_SKIN:"/global/libraries/jwplayer/jwplayer-5.5/skins/glow.zip",init:function(e){for(var t=0;t<e.length;++t){var i=e.eq(t);!1===i.hasClass(this.STATE_INIT)&&(i.find("."+this.CLASS_LINK).on("click",$.proxy(this.handleClick,this)),i.addClass(this.STATE_INIT))}},load:function(e){if(e.hasClass(this.STATE_LAUNCHED)){var t=e.find("video")[0];t&&t.currentTime&&(t.currentTime=0,t.play())}else{var i=e.find("."+this.CLASS_LINK),a=e.find("."+this.CLASS_POSTER),s=i.attr("href"),r=this.FALLBACK_WIDTH,n=this.FALLBACK_HEIGHT;if(a[0]){var o=a.width()/a.attr("width");r=Math.round(o*a.attr("width")),n=Math.round(o*a.attr("height"))}var l={element:e,folderUrl:s,width:r,height:n},d;if(browser.hasH264)if(browser.isIphone){var h=l.folderUrl+this.FILENAME_VIDEO_SMALL;d=this.getHTMLForH264Video(h,l.width,l.height)}else{var h=l.folderUrl+this.FILENAME_VIDEO;d=this.getHTMLForH264Video(h,l.width,l.height)}else{var h=l.folderUrl+this.FILENAME_VIDEO;d=this.getHTMLForFlashVideo(h,l.width,l.height,this.URL_FLASHPLAYER,this.URL_FLASHPLAYER_SKIN)}l.element.html(d),l.element.addClass(this.STATE_LAUNCHED);var T=this;l.element.find("video").one("canplaythrough",function(){l.element.addClass(T.STATE_CANPLAYTHROUGH)}),(browser.isIpad||browser.isIphone)&&l.element.find("video")[0].play()}},handleClick:function(e){var t=$(e.currentTarget).parents("."+this.CLASS).eq(0);return this.load(t),e.stopPropagation(),e.preventDefault(),!1},getAbsoluteUrl:function(e){var t;return t=0===e.indexOf("http:")||0===e.indexOf("https:")?e:0===e.indexOf("//")?window.location.protocol+e:0===e.indexOf("/")?window.location.protocol+"//"+window.location.hostname+e:window.location.href.substr(0,window.location.href.lastIndexOf("/"))+"/"+e},getHTMLForH264Video:function(e,t,i){var a;return'<video width="'+t+'" height="'+i+'" src="'+e+'" controls autoplay preload="auto"></video> \n'},getHTMLForFlashVideo:function(e,t,i,a,s){var r=this.getAbsoluteUrl(e),n;return'<object     classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"     codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0"     width="'+t+'"     height="'+i+'"> \n  <param name="allowScriptAccess" value="always"> \n  <param name="allowFullScreen" value="true"> \n  <param name="movie" value="'+a+'"> \n  <param name="flashvars" value="file='+r+"&autostart=true&controlbar=over&skin="+s+'"> \n  <param name="quality" value="high"> \n  <param name="bgcolor" value="#000000"> \n  <embed     src="'+a+'"     flashvars="file='+r+"&autostart=true&controlbar=over&skin="+s+'"     quality="high"     bgcolor="#000000"     width="'+t+'"     height="'+i+'"     allowScriptAccess="always"     allowFullScreen="true"     type="application/x-shockwave-flash"     pluginspage="http://www.adobe.com/go/getflashplayer"   > \n  </embed> \n</object> \n'}};